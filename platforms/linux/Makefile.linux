-include Makefile.static
-include Makefile.wolf
-include $(PWD)/platforms/linux/Makefile.linux.def

LIBDIR ?= .
C_SDK_LIB = $(LIBDIR)/libacnsdkc.a

SRC += $(wildcard $(PWD)/platforms/linux/json/*.c)
SRC += $(wildcard $(PWD)/platforms/linux/arrow/*.c)
SRC += $(wildcard $(PWD)/platforms/linux/time/*.c)

OBJ = $(SRC:.c=.o)

AR_PRM = rcs
# AR_PRM = ru
 
.SUFFIXES: .c

default: private $(C_SDK_LIB)

.c.o:
	$(CC) $(CC_FLAGS) $(CC_SYMBOLS) $(INCLUDES) -c $< -o $@

$(C_SDK_LIB): $(OBJ)
	$(AR) $(AR_PRM) $(C_SDK_LIB) $(OBJ)

private:
	$(call check_private)
	
depend: dep

dep:
	makedepend -- $(CFLAGS) -- $(INCLUDES) $(SRC)

clean:
	$(RM) $(OBJ) $(C_SDK_LIB)
